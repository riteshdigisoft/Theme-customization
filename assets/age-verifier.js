class AgeVerifier extends HTMLElement{constructor(){super(),this.cookieName="beyours:age-verifier",this.classes={bodyClass:"promo-popup--open",activeClass:"is-active",closingClass:"is-closing",showImage:"show-image",blurImage:"promo-popup--blur"},this.blurImage="true"===this.dataset.blurImage,this.popup=this.querySelector(".promo-popup"),this.getCookie(this.cookieName)&&"true"!==this.dataset.testMode||this.init();const e=this.querySelector("button");e&&e.addEventListener("click",this.close.bind(this))}connectedCallback(){Shopify.designMode&&(this.onShopifySectionLoad=this.onSectionLoad.bind(this),this.onShopifySectionSelect=this.onSectionSelect.bind(this),this.onShopifySectionDeselect=this.onSectionDeselect.bind(this),document.addEventListener("shopify:section:load",this.onShopifySectionLoad),document.addEventListener("shopify:section:select",this.onShopifySectionSelect),document.addEventListener("shopify:section:deselect",this.onShopifySectionDeselect))}disconnectedCallback(){Shopify.designMode&&(document.removeEventListener("shopify:section:load",this.onShopifySectionLoad),document.removeEventListener("shopify:section:select",this.onShopifySectionSelect),document.removeEventListener("shopify:section:deselect",this.onShopifySectionDeselect),document.body.classList.remove(this.classes.bodyClass),this.blurImage&&document.body.classList.remove(this.classes.blurImage))}onSectionLoad(e){filterShopifyEvent(e,this,(()=>this.open.bind(this)))}onSectionSelect(e){filterShopifyEvent(e,this,this.open.bind(this))}onSectionDeselect(e){filterShopifyEvent(e,this,this.close.bind(this))}init(){Shopify&&Shopify.designMode||this.open()}open(){console.log(this.blurImage),document.body.classList.remove(this.classes.bodyClass),this.blurImage&&document.body.classList.remove(this.classes.blurImage),this.popup.classList.add(this.classes.activeClass),setTimeout((()=>{this.popup.classList.add(this.classes.showImage)}),600),"center"===this.popup.dataset.position&&(setScrollbarWidth(),document.body.classList.add(this.classes.bodyClass),this.blurImage&&document.body.classList.add(this.classes.blurImage))}close(){this.popup.classList.add(this.classes.closingClass),this.blurImage&&document.body.classList.remove(this.classes.blurImage),setTimeout((()=>{this.popup.classList.remove(this.classes.activeClass),this.popup.classList.remove(this.classes.closingClass),this.popup.classList.remove(this.classes.showImage),"center"===this.popup.dataset.position&&document.body.classList.remove(this.classes.bodyClass)}),500),"true"!==this.dataset.testMode?this.setCookie(this.cookieName,this.dataset.expiry):this.removeCookie(this.cookieName)}getCookie(e){const s=document.cookie.match(`(^|;)\\s*${e}\\s*=\\s*([^;]+)`);return s?s[2]:null}setCookie(e,s){document.cookie=`${e}=true; max-age=${24*s*60*60}; path=/`}removeCookie(e){document.cookie=`${e}=; max-age=0`}}customElements.define("age-verifier",AgeVerifier);