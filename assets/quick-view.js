class QuickViewDrawer extends MenuDrawer{constructor(){super(),this.setClasses({open:"quick-view--open",opening:"quick-view--opening",closing:"quick-view--closing"}),this.addEventListener("close",(()=>{const e=this.querySelector(".quick-view__content");e.innerHTML="",e.classList.remove("hide-cover"),document.dispatchEvent(new CustomEvent("quickview:close"))}))}}customElements.define("quick-view-drawer",QuickViewDrawer);class QuickViewButton extends MenuDrawer{constructor(){super(),this.addEventListener("click",(()=>{const e=this.closest(".card-wrapper").querySelector("quick-view-drawer");e?(e.querySelector("summary").click(),document.dispatchEvent(new CustomEvent("quickview:open",{detail:{productUrl:this.dataset.productUrl}}))):this.dataset.productUrl&&(window.location.href=this.dataset.productUrl)}))}}customElements.define("quick-view-button",QuickViewButton);class QuickView extends HTMLElement{constructor(){super()}connectedCallback(){new IntersectionObserver(this.handleIntersection.bind(this)).observe(this)}handleIntersection(e,t){if(!e[0].isIntersecting)return;const i=".quick-view__content",n=this.querySelector(i),r=this.dataset.productUrl.split("?")[0];fetch(`${r}?view=modal`).then((e=>e.text())).then((e=>{setTimeout((()=>{const t=(new DOMParser).parseFromString(e,"text/html").querySelector(i);this.setInnerHTML(n,t.innerHTML),window.Shopify&&Shopify.PaymentButton&&Shopify.PaymentButton.init()}),200),setTimeout((()=>{n.classList.add("hide-cover"),document.dispatchEvent(new CustomEvent("quickview:loaded",{detail:{productUrl:this.dataset.productUrl}}))}),500)})).catch((e=>{console.error(e)}))}setInnerHTML(e,t){e.innerHTML=t,e.querySelectorAll("script").forEach((e=>{const t=document.createElement("script");Array.from(e.attributes).forEach((e=>{t.setAttribute(e.name,e.value)})),t.appendChild(document.createTextNode(e.innerHTML)),e.parentNode.replaceChild(t,e)}))}}customElements.define("quick-view",QuickView);