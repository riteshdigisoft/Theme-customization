class GiftQuantity extends QuantityInput{constructor(){super()}init(){super.init(),this.giftWrapping=document.querySelector("gift-wrapping"),this.cartItemsSize=parseInt(this.getAttribute("cart-items-size")),this.giftWrapsInCart=parseInt(this.getAttribute("gift-wraps-in-cart")),this.itemsInCart=parseInt(this.getAttribute("items-in-cart")),1==this.cartItemsSize&&this.giftWrapsInCart>0?this.giftWrapping.removeGiftWrap():(this.giftWrapsInCart>0&this.giftWrapsInCart!=this.itemsInCart||this.giftWrapsInCart>0&&0==this.giftWrapping.length||0==this.giftWrapsInCart&&this.giftWrapping.length>0)&&this.update()}update(){this.input.value=this.itemsInCart,this.input.dispatchEvent(this.changeEvent)}}customElements.define("gift-quantity",GiftQuantity);class GiftWrapping extends HTMLElement{constructor(){super(),this.miniCart=document.querySelector("mini-cart"),this.giftWrapId=this.dataset.giftWrapId,this.giftWrapping=this.dataset.giftWrapping,this.cartItemsSize=parseInt(this.getAttribute("cart-items-size")),this.giftWrapsInCart=parseInt(this.getAttribute("gift-wraps-in-cart")),this.itemsInCart=parseInt(this.getAttribute("items-in-cart")),this.querySelector('[name="attributes[gift-wrapping]"]').addEventListener("change",(t=>{t.target.checked?this.setGiftWrap():this.removeGiftWrap()})),this.miniCart||(1==this.cartItemsSize&&this.giftWrapsInCart>0?this.removeGiftWrap():(this.giftWrapsInCart>0&this.giftWrapsInCart!=this.itemsInCart||this.giftWrapsInCart>0&&0==this.giftWrapping.length||0==this.giftWrapsInCart&&this.giftWrapping.length>0)&&this.setGiftWrap())}setGiftWrap(){const t=this.querySelector(".loading-overlay");t.classList.remove("hidden");const i=this.getSectionsToRender().map((t=>t.section)),e=JSON.stringify({updates:{[this.giftWrapId]:this.itemsInCart},attributes:{"gift-wrapping":!0},sections:i,sections_url:window.location.pathname});fetch(`${window.routes.cart_update_url}`,{...fetchConfig(),body:e}).then((t=>t.json())).then((i=>{t.classList.add("hidden"),document.body.classList.contains("template-cart")?window.location.href=window.routes.cart_url:this.miniCart&&this.miniCart.renderContents(i)})).catch((t=>{console.error(t)}))}removeGiftWrap(){const t=this.querySelector(".loading-overlay");t.classList.remove("hidden");const i=this.getSectionsToRender().map((t=>t.section)),e=JSON.stringify({updates:{[this.giftWrapId]:0},attributes:{"gift-wrapping":"","gift-note":""},sections:i,sections_url:window.location.pathname});fetch(`${window.routes.cart_update_url}`,{...fetchConfig(),body:e}).then((t=>t.json())).then((i=>{t.classList.add("hidden"),document.body.classList.contains("template-cart")?window.location.href=window.routes.cart_url:this.miniCart&&this.miniCart.renderContents(i)})).catch((t=>{console.error(t)}))}getSectionsToRender(){return[{id:"mini-cart",section:"mini-cart",selector:".shopify-section"},{id:"cart-icon-bubble",section:"cart-icon-bubble",selector:".shopify-section"},{id:"mobile-cart-icon-bubble",section:"mobile-cart-icon-bubble",selector:".shopify-section"},{id:"cart-live-region-text",section:"cart-live-region-text",selector:".shopify-section"}]}}customElements.define("gift-wrapping",GiftWrapping);class GiftNote extends HTMLElement{constructor(){super(),this.addEventListener("change",debounce((t=>{const i=JSON.stringify({attributes:{"gift-note":t.target.value}});fetch(`${window.routes.cart_update_url}`,{...fetchConfig(),body:i})}),300))}}customElements.define("gift-note",GiftNote);