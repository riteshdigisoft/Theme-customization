class MobileDock extends HTMLElement{constructor(){super()}connectedCallback(){const e=document.querySelector(".shopify-section-header");this.isAction=!1,this.scrollY=e?parseInt(e.getBoundingClientRect().bottom):0,Shopify&&Shopify.designMode&&(this.scrollY=0),this.querySelectorAll(".dock__item[data-action]").forEach((e=>{e.addEventListener("click",this.onButtonClick.bind(this))})),document.addEventListener("menudrawer:close",this.hideStickyHeader.bind(this)),document.addEventListener("searchmodal:close",this.hideStickyHeader.bind(this)),this.onScrollHandler=this.onScroll.bind(this),window.addEventListener("scroll",this.onScrollHandler,!1),this.onScrollHandler(),document.documentElement.style.setProperty("--mobile-dock-height",`${this.offsetHeight}px`),document.addEventListener("matchSmall",(()=>{document.documentElement.style.setProperty("--mobile-dock-height",`${this.offsetHeight}px`)}))}disconnectedCallback(){window.removeEventListener("scroll",this.onScrollHandler)}onScroll(){(window.pageYOffset||document.documentElement.scrollTop)>=this.scrollY?this.classList.add("is-active"):this.classList.remove("is-active")}onButtonClick(e){e.preventDefault();const t=e.currentTarget,o=this.waitStickyHeader();switch(t.dataset.action){case"cart":this.isAction=!0;const e=document.querySelector("mini-cart");e?setTimeout((()=>{e.open(),document.activeElement.blur()}),o):window.location.href=window.routes.cart_url;break;case"menu":this.isAction=!0;const t=document.querySelector("header-drawer");t&&setTimeout((()=>{t.openMenuDrawer()}),o);break;case"search":this.isAction=!0;const n=document.querySelectorAll("search-modal");n.length>0?n.forEach((e=>{"none"!==window.getComputedStyle(e).display&&setTimeout((()=>{e.open(),e.querySelector('input:not([type="hidden"])').focus()}),o)})):window.location.href=window.routes.search_url}}hideStickyHeader(){const e=document.querySelector("sticky-header");null!==e&&theme.config.mqlSmall&&this.isAction&&e.sticky()&&setTimeout((()=>{e.hide(),this.isAction=!1}),500)}waitStickyHeader(){const e=document.querySelector("sticky-header");if(null!==e)return e.sticky()||this.isElementVisible(e)?0:(e.hide(),setTimeout((()=>e.reveal())),250)}isElementVisible(e){const t=e.getBoundingClientRect(),o=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,i=function(e,t){return document.elementFromPoint(e,t)};return!(t.right<0||t.bottom<0||t.left>o||t.top>n)&&(e.contains(i(t.left,t.top))||e.contains(i(t.right,t.top))||e.contains(i(t.right,t.bottom))||e.contains(i(t.left,t.bottom))||e.parentNode.contains(i(t.left,t.top))||e.parentNode.contains(i(t.right,t.top))||e.parentNode.contains(i(t.right,t.bottom))||e.parentNode.contains(i(t.left,t.bottom)))}}customElements.define("mobile-dock",MobileDock);