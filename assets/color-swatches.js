class ColorSwatch extends HTMLElement{constructor(){super(),this.cached={},this.variantId=this.dataset.variantId,this.container=this.closest(".card-wrapper"),this.variantId||theme.config.mqlSmall?(this.addEventListener("mouseenter",this.onHoverHandler.bind(this)),this.querySelector("a").addEventListener("click",(e=>e.preventDefault()))):this.addEventListener("mouseenter",this.onHoverHandler.bind(this))}onHoverHandler(){this.variantId?theme.config.mqlSmall?this.colorSwatchChange():this.colorSwatchFetch():this.colorSwatchChange()}colorSwatchChange(e){const t=this.container.querySelector(".card--image-animate.media img");if(null!==t||e){null!==t&&(t.src=this.dataset.src,t.srcset=this.dataset.srcset);this.container.querySelectorAll(".color-swatch").forEach((e=>{e.classList.remove("is-active")})),this.classList.add("is-active"),this.container.querySelector(".card--image-animate.media").style.display="block",this.container.querySelector(".card-media-video").style.display="none"}}colorSwatchFetch(){const e=this.dataset.productHandle,t=this.dataset.collectionHandle;let i=`${window.routes.root_url}/products/${e}?variant=${this.variantId}&view=card`;t.length>0&&(i=`${window.routes.root_url}/collections/${t}/products/${e}?variant=${this.variantId}&view=card`),i=i.replace("//","/"),this.cached[i]?this.renderProductInfo(this.cached[i]):fetch(i).then((e=>e.text())).then((e=>{const t=(new DOMParser).parseFromString(e,"text/html");this.cached[i]=t,this.renderProductInfo(t)})).catch((e=>{console.error(e)}))}renderProductInfo(e){this.updateButtons(e),this.updateTitle(e),this.updatePrice(e),this.colorSwatchChange(!0)}updateTitle(e){const t=".card-information__text",i=this.container.querySelector(t),r=e.querySelector(t);r&&i&&(i.innerHTML=r.innerHTML+"<small>&ndash;&nbsp;"+this.getAttribute("title")+"</small>")}updatePrice(e){if(e.querySelector("color-swatch-radios"))return;const t=".price",i=this.container.querySelector(t),r=e.querySelector(t);r&&i&&(i.innerHTML=r.innerHTML)}updateButtons(e){const t=".card-information__button",i=this.container.querySelector(t),r=e.querySelector(t);r&&i&&(i.innerHTML=r.innerHTML),i.classList.remove("is-expanded"),r.classList.contains("is-expanded")&&i.classList.add("is-expanded")}}customElements.define("color-swatch",ColorSwatch);class ColorSwatchRadios extends HTMLElement{constructor(){super(),this.classes={soldOut:"price--sold-out",onSale:"price--on-sale",noCompare:"price--no-compare",hidden:"hidden",loading:"loading"},this.selectors={cardWrapper:".card-wrapper",priceWrapper:".price",price:".price__regular .price-item--regular",comparePrice:".price__sale .price-item--regular",salePrice:".price__sale .price-item--sale",unitWrapper:".unit-price",unitPrice:"[data-unit-price]",unitPriceBaseUnit:"[data-unit-base]"},this.miniCart=document.querySelector("mini-cart"),this.init(),this.addEventListener("change",this.onVariantChange);const e=this.querySelectorAll(".swatch:not(.disabled)");e.forEach((e=>e.addEventListener("mouseenter",this.onEnterHandler.bind(this)))),e.forEach((e=>e.addEventListener("mouseleave",this.onLeaveHandler.bind(this))));this.querySelectorAll(".swatch:not(.disabled) input").forEach((e=>e.addEventListener("click",this.onClickHandler.bind(this))))}cacheElements(){this.container=this.closest(this.selectors.cardWrapper),this.cache={priceWrapper:this.container.querySelector(this.selectors.priceWrapper),price:this.container.querySelector(this.selectors.price),comparePrice:this.container.querySelector(this.selectors.comparePrice),salePrice:this.container.querySelector(this.selectors.salePrice),priceHTML:this.container.querySelector(this.selectors.priceWrapper).cloneNode(!0).innerHTML,priceClass:this.container.querySelector(this.selectors.priceWrapper).cloneNode(!0).getAttribute("class")}}onClickHandler(e){const t=e.currentTarget,i=t.parentNode,r=this.currentVariant.id;if(r){if(document.body.classList.contains("template-cart")||!window.shopSettings.cartDrawer)return void Shopify.postLink(window.routes.cart_add_url,{parameters:{id:r,quantity:1}});t.setAttribute("disabled",""),i.classList.add(this.classes.loading);const e=this.miniCart?this.miniCart.getSectionsToRender().map((e=>e.id)):[],a=JSON.stringify({id:r,quantity:1,sections:e,sections_url:window.location.pathname});fetch(`${window.routes.cart_add_url}`,{...fetchConfig("javascript"),body:a}).then((e=>e.json())).then((e=>{this.miniCart&&this.miniCart.renderContents(e)})).catch((e=>{console.error(e)})).finally((()=>{t.removeAttribute("disabled"),i.classList.remove(this.classes.loading)}))}}onEnterHandler(e){e.currentTarget.querySelector("input").checked=!0,this.dispatchEvent(new Event("change")),setTimeout((()=>{this.cacheElements(),this.updatePrice(),this.updateUnitPrice()}))}onLeaveHandler(){this.cache.priceWrapper.innerHTML=this.cache.priceHTML,this.cache.priceWrapper.setAttribute("class",this.cache.priceClass)}onVariantChange(){this.updateOptions(),this.updateMasterId()}init(){this.updateOptions(),this.updateMasterId(),this.setAvailability()}updatePrice(){const e=this.currentVariant;e&&(this.cache.priceWrapper.classList.remove(this.classes.soldOut),this.cache.priceWrapper.classList.remove(this.classes.onSale),this.cache.priceWrapper.classList.remove(this.classes.noCompare),0==e.available?this.cache.priceWrapper.classList.add(this.classes.soldOut):e.compare_at_price>e.price&&this.cache.priceWrapper.classList.add(this.classes.onSale),this.cache.price.innerHTML="<price-money><bdi>"+theme.Currency.formatMoney(e.price,window.shopSettings.moneyFormat)+"</bdi></price-money>",e.compare_at_price>e.price&&(this.cache.comparePrice.innerHTML="<price-money><bdi>"+theme.Currency.formatMoney(e.compare_at_price,window.shopSettings.moneyFormat)+"</bdi></price-money>",this.cache.salePrice.innerHTML="<price-money><bdi>"+theme.Currency.formatMoney(e.price,window.shopSettings.moneyFormat)+"</bdi></price-money>"))}updateUnitPrice(){const e=this.currentVariant;this.container.querySelector(this.selectors.unitWrapper)&&(e&&e.unit_price?(this.container.querySelector(this.selectors.unitPrice).innerHTML="<price-money><bdi>"+theme.Currency.formatMoney(e.unit_price,window.shopSettings.moneyFormat)+"</bdi></price-money>",this.container.querySelector(this.selectors.unitPriceBaseUnit).innerHTML=theme.Currency.getBaseUnit(e),this.container.querySelector(this.selectors.unitWrapper).classList.remove(this.classes.hidden)):this.container.querySelector(this.selectors.unitWrapper).classList.add(this.classes.hidden))}updateOptions(){const e=Array.from(this.querySelectorAll("fieldset"));this.options=e.map((e=>Array.from(e.querySelectorAll("input")).find((e=>e.checked)).value))}updateMasterId(){this.currentVariant=this.getVariantData()?.find((e=>!e.options.map(((e,t)=>this.options[t]===e)).includes(!1)))}getVariantData(){return this.variantData=this.variantData||JSON.parse(this.querySelector('[type="application/json"]').textContent),this.variantData}setAvailability(){if(!this.currentVariant)return;this.querySelectorAll(".variant-input-wrapper").forEach((e=>{this.disableVariantGroup(e)}));const e=this.currentVariant.options.map(((e,t)=>({value:e,index:`option${t+1}`}))),t=this.createAvailableOptionsTree(this.variantData,e,this.currentVariant);for(var[i,r]of Object.entries(t))this.manageOptionState(i,r)}enableVariantOption(e,t){const i=t.value.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g,"\\$1"),r=e.querySelector('input[data-option-value="'+i+'"]');r&&(r.removeAttribute("disabled"),r.parentNode.classList.remove("disabled"),t.soldOut&&(r.setAttribute("disabled",""),r.parentNode.classList.add("disabled")))}disableVariantGroup(e){e.querySelectorAll("input").forEach((e=>{e.setAttribute("disabled",""),e.parentNode.classList.add("disabled")}))}manageOptionState(e,t){const i=this.querySelector('.variant-input-wrapper[data-option-index="'+e+'"]');t.forEach((e=>{this.enableVariantOption(i,e)}))}createAvailableOptionsTree(e,t){return e.reduce(((e,i)=>(Object.keys(e).forEach((r=>{if(null===i[r])return;let a=e[r].find((e=>e.value===i[r]));void 0===a&&(a={value:i[r],soldOut:!0},e[r].push(a));const s=t.find((({value:e,index:t})=>"option1"===t)),n=t.find((({value:e,index:t})=>"option2"===t));switch(r){case"option1":a.soldOut=(!a.soldOut||!i.available)&&a.soldOut;break;case"option2":s&&i.option1===s.value&&(a.soldOut=(!a.soldOut||!i.available)&&a.soldOut);case"option3":s&&i.option1===s.value&&n&&i.option2===n.value&&(a.soldOut=(!a.soldOut||!i.available)&&a.soldOut)}})),e)),{option1:[],option2:[],option3:[]})}}customElements.define("color-swatch-radios",ColorSwatchRadios);